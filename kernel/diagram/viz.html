<!DOCTYPE html>
<meta charset="utf-8">
<body>
<script src="https://d3js.org/d3.v5.min.js"></script>
<script src="https://unpkg.com/viz.js@1.8.1/viz.js" type="javascript/worker"></script>
<script src="https://unpkg.com/d3-graphviz@2.1.0/build/d3-graphviz.min.js"></script>
<div id="graph" style="text-align: center;"></div>

<script>
var data
async function reader_load(r)
{
	var rest = ""
	r.read().then(function _proc({ done, value }) {
		if (done) {
			d3.select("#graph").graphviz().fade(false).renderDot(data);
			return;
		}
		const chunk = new TextDecoder("utf-8").decode(value);
		data += chunk
		console.log(chunk);
		return r.read().then(_proc);
	});
}
async function data_load1(url)
{
	data = ""
	let f = await fetch(url);
	reader_load(f.body.getReader())
}

</script>

<script>
	//d3.select("#graph").graphviz() .fade(false).renderDot(dot.textContent);
	data_load1('Linux_kernel_diagram.dot')
	//d3.select("#graph").graphviz() .fade(false).renderDot('digraph  {a -> b}');
</script>
